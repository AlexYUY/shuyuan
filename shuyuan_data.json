[
  {
    "bookSourceComment": "//2024.12.13 ◎夜泽川◎",
    "bookSourceGroup": "",
    "bookSourceName": "爱巴士",
    "bookSourceType": 0,
    "bookSourceUrl": "https://www.ibus233.com/",
    "customOrder": 42,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "@js: var result = [];\njava.toast(\"🔥动态获取发现中……\");\nvar push=(title,url,size)=>result.push({\n  \t\"title\": title,\n  \t\"url\": url,\n  \t\"style\": {\n   \"layout_flexGrow\": 1,\n   \"layout_flexBasisPercent\": size\n   }\n });\nvar tag = java.ajax(\"https://www.ibus233.com/category\");\nif (tag) {\na=org.jsoup.Jsoup.parse(tag).select(\".list a\");\npush(\"分类\",null,1)\n    for(i in a){\n        title=a[i].text()\n        url=a[i].attr(\"href\")\n        size=0.4\n        title=String(title).replace(/\\s/,\"\");\n  url=String(url).replace(/^/,\"https:\").replace(/$/i,\"_{{page}}\");\n        push(title,url,size)\n    };\n      } else { \n      java.toast(\"🚫发现获取失败……\");\n}\nJSON.stringify(result);",
    "lastUpdateTime": "1734363496692",
    "respondTime": 180000,
    "ruleBookInfo": {
      "author": ".auth@text",
      "coverUrl": "",
      "intro": ".intro p@text",
      "kind": ".tags a@text",
      "name": "h1@text",
      "tocUrl": "a[href~=catalog]@href"
    },
    "ruleContent": {
      "content": ".article@html||.nochapter@html",
      "nextContentUrl": "",
      "replaceRegex": "##\\n.*华丽的分割线[\\s\\S]*"
    },
    "ruleExplore": {
      "author": "h2@text##.*by",
      "bookList": ".g-list@li",
      "bookUrl": "a.0@href##^##https:",
      "kind": ".tags span@text",
      "name": "h2@text##by.*"
    },
    "ruleSearch": {
      "author": "$.auth",
      "bookList": "$.data.list",
      "bookUrl": "https://www.ibus233.com/novel/{{$._id}}",
      "checkKeyWord": "",
      "kind": "$.tags",
      "name": "$.name"
    },
    "ruleToc": {
      "chapterList": ".list a",
      "chapterName": "text",
      "chapterUrl": "href##^##https:",
      "nextTocUrl": ".section-list@a@href##^##https:"
    },
    "searchUrl": "<js>\nsckey = org.jsoup.Jsoup.parse(java.ajax(source.key + \"search\")).select(\".page-search\").attr(\"data-id\");\njava.log(sckey);\nbody = {\n  \"body\": `name=${key}&tags=&type=3&tt=&page_index=${page}&app=2&searchkey=${sckey}`,\n  \"headers\":{\"Referer\":source.key},\n  \"method\": \"POST\"\n}\nresult = source.key + \"api/search/list\" + \",\" + JSON.stringify(body);\nresult;\n</js>",
    "weight": 0
  },
  {
    "bookSourceComment": "",
    "bookSourceGroup": "",
    "bookSourceName": "18jinshu✈️",
    "bookSourceType": 0,
    "bookSourceUrl": "https://www.18jinshu.com",
    "bookUrlPattern": "",
    "customOrder": 0,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "全部::/index.php/book/category/pay/1/page/{{page}}\n校园春色::/index.php/book/category/pay/1/list/3/page/{{page}}\n东方玄幻::/index.php/book/category/pay/1/list/4/page/{{page}}\n乡村爱情::/index.php/book/category/pay/1/list/5/page/{{page}}\n都市激情::/index.php/book/category/pay/1/list/6/page/{{page}}\n家庭乱伦::/index.php/book/category/pay/1/list/7/page/{{page}}\n娱乐明星::/index.php/book/category/pay/1/list/8/page/{{page}}\n历史架空::/index.php/book/category/pay/1/list/9/page/{{page}}\n经典武侠::/index.php/book/category/pay/1/list/10/page/{{page}}\n系统异能::/index.php/book/category/pay/1/list/11/page/{{page}}\n穿越重生::/index.php/book/category/pay/1/list/12/page/{{page}}\n科学幻想::/index.php/book/category/pay/1/list/13/page/{{page}}\n同人改编::/index.php/book/category/pay/1/list/14/page/{{page}}\n强奸轮奸::/index.php/book/category/pay/1/list/15/page/{{page}}\n西方魔幻::/index.php/book/category/pay/1/list/16/page/{{page}}\n贤者小说::/index.php/book/category/pay/1/list/17/page/{{page}}\n堕落::/index.php/book/category/pay/1/list/18/page/{{page}}\n反差::/index.php/book/category/pay/1/list/19/page/{{page}}\n凌辱::/index.php/book/category/pay/1/list/20/page/{{page}}\n纯爱::/index.php/book/category/pay/1/list/21/page/{{page}}\n百合::/index.php/book/category/pay/1/list/22/page/{{page}}\n重口::/index.php/book/category/pay/1/list/23/page/{{page}}\n伪娘::/index.php/book/category/pay/1/list/24/page/{{page}}\n性奴::/index.php/book/category/pay/1/list/25/page/{{page}}\n萝莉::/index.php/book/category/pay/1/list/26/page/{{page}}\n禁忌::/index.php/book/category/pay/1/list/27/page/{{page}}\n熟女::/index.php/book/category/pay/1/list/28/page/{{page}}\nNTR::/index.php/book/category/pay/1/list/29/page/{{page}}\n媚黑::/index.php/book/category/pay/1/list/30/page/{{page}}\n绿帽::/index.php/book/category/pay/1/list/31/page/{{page}}\n调教::/index.php/book/category/pay/1/list/32/page/{{page}}\n正太::/index.php/book/category/pay/1/list/33/page/{{page}}\n女主::/index.php/book/category/pay/1/list/34/page/{{page}}\n反转::/index.php/book/category/pay/1/list/35/page/{{page}}\n下克上::/index.php/book/category/pay/1/list/36/page/{{page}}\n羞耻::/index.php/book/category/pay/1/list/37/page/{{page}}\n其他::/index.php/book/category/pay/1/list/38/page/{{page}}\n校园::/index.php/book/category/pay/1/list/39/page/{{page}}\n玄幻::/index.php/book/category/pay/1/list/40/page/{{page}}\n乡村::/index.php/book/category/pay/1/list/41/page/{{page}}\n乱伦::/index.php/book/category/pay/1/list/42/page/{{page}}\n都市::/index.php/book/category/pay/1/list/43/page/{{page}}\n历史::/index.php/book/category/pay/1/list/44/page/{{page}}\n武侠::/index.php/book/category/pay/1/list/45/page/{{page}}\n系统::/index.php/book/category/pay/1/list/46/page/{{page}}\n穿越::/index.php/book/category/pay/1/list/47/page/{{page}}\n科幻::/index.php/book/category/pay/1/list/48/page/{{page}}\n同人::/index.php/book/category/pay/1/list/49/page/{{page}}\n强奸::/index.php/book/category/pay/1/list/50/page/{{page}}\n奇幻::/index.php/book/category/pay/1/list/51/page/{{page}}",
    "header": "{\n\"User-Agent\":\"Mozilla/5.0 (Linux; Android 9) Mobile Safari/537.36\",\"referer\":\"{{baseUrl}}\",\n}",
    "lastUpdateTime": "1734435316381",
    "loginCheckJs": "",
    "loginUrl": "",
    "respondTime": 180000,
    "ruleBookInfo": {
      "author": "",
      "coverUrl": ".story-detail__info@.cover@img@data-src",
      "init": "",
      "intro": ".j-info-desc@text",
      "kind": "",
      "lastChapter": ".j-catalog-list@a.-1@text",
      "name": ".title@h1@text",
      "tocUrl": "",
      "wordCount": ""
    },
    "ruleContent": {
      "content": ".content@html",
      "nextContentUrl": "",
      "replaceRegex": ""
    },
    "ruleExplore": {
      "author": "",
      "bookList": ".list-wrapper@li",
      "bookUrl": ".title@a@href",
      "coverUrl": ".cover-wrapper@img@data-src",
      "intro": ".desc@text",
      "name": ".title@text"
    },
    "ruleSearch": {
      "author": "",
      "bookList": ".list@.j-item",
      "bookUrl": "a.0@href",
      "checkKeyWord": "",
      "coverUrl": ".loaded@data-src",
      "intro": ".item-info__desc@text",
      "kind": "",
      "lastChapter": "",
      "name": ".j-item-title@text"
    },
    "ruleToc": {
      "chapterList": ".j-catalog-list@li",
      "chapterName": "a@text",
      "chapterUrl": "a@href",
      "nextTocUrl": "",
      "preUpdateJs": ""
    },
    "searchUrl": "/index.php/book/search?key={{key}}",
    "weight": 0
  },
  {
    "bookSourceComment": "需登录\n◎搜索格式◎\n1、搜索用户<关闭精确搜索>\n@用户名\n2、搜索合集<关闭精确搜索>\n#合集\n3、搜索文章，直接搜索\n发现规则\n                                    🏷标签\n标签名::https://api.lofter.com/oldapi/tagPosts.api?product=lofter-android-6.13.0&method=newTagSearch&offset={{(page-1) *22}}&limit=22&firstpermalink=null&tag=标签名&type=new,{\"method\": \"POST\",\"body\":\"null\"}\n📃用户（搜索可以得到)\n出现目录加载失败，请尝试刷新，因为可能是请求失败导致的",
    "bookSourceGroup": "③📖  论坛",
    "bookSourceName": "📖Lofter",
    "bookSourceType": 0,
    "bookSourceUrl": "https://newsmiss.lofter.com",
    "bookUrlPattern": "",
    "customOrder": 55,
    "enabled": true,
    "enabledCookieJar": true,
    "enabledExplore": true,
    "exploreUrl": "              ----------     🏷标签     ----------               ::\n百合::https://api.lofter.com/oldapi/tagPosts.api?product=lofter-android-6.13.0&method=newTagSearch&offset={{(page-1) *22}}&limit=22&firstpermalink=null&tag=百合&type=new,{\"method\": \"POST\",\"body\":\"null\"}\n\n               ----------     📃用户     ----------               ::\n砂上雪::http://api.lofter.com/v2.0/blogHomePage.api?product=lofter-android-6.13.0,{\"method\":\"POST\",\"body\":\"targetblogid=514131314&supportposttypes=1%2C2%2C3%2C4%2C5%2C6&blogdomain=taste-s.lofter.com&offset={{(page-1)*18}}&method=getPostLists&postdigestnew=1&returnData=1&limit=18&checkpwd=1&needgetpoststat=1\"}",
    "header": "{\n\"Content-Type\": \"application/x-www-form-urlencoded;charset=utf-8\"}",
    "lastUpdateTime": "1734537404548",
    "loginUrl": "https://newsmiss.lofter.com",
    "respondTime": 241015,
    "ruleBookInfo": {
      "author": "$.response.blogInfo.blogNickName||$.response.posts[0].post.blogInfo.blogNickName",
      "canReName": "1",
      "coverUrl": "$.response.collection.coverUrl@put:{page:$.response.blogInfo.blogStat.publicPostCount}",
      "init": "<js>\ntry{\ncookie = cookie.getCookie(\"https://newsmiss.lofter.com\");\n\nlofter = String(cookie).match(/;\\s(LOFTER-[^-]+-LOGIN-AUTH)=(.*?);/);\n\nheader = {};\nheader[lofter[1]] = lofter[2];\nsource.putLoginHeader(JSON.stringify(header));\nresult;\n}catch(e){\n\tresult = result\n\t}\n</js>",
      "intro": "@js:\na='{{$.response.collection.description}}';\nb='{{$.response.blogInfo.blogNickName}}';\nc=java.getString('$.response.posts[0].post.digest||$.response.collection.description||$.response.blogInfo.selfIntro');\n\nresult =c;\n\ncname=\"{{$.response.posts[0].post.postCollection.name}}\";\ncdes=java.getString('$.response.posts[0].post.postCollection.description');\nccount=\"{{$.response.posts[0].post.postCollection.postCount}}\";\nif(cname){\nresult=result+\"\\n&lrm;\\n🈴所属合集：\"+cname+\"\\n📜合集介绍：\"+cdes+\"\\n\"+\"🔢合集章节总数：\"+ccount\n+\"\\n🔍搜索合集：#\"+cname+\"<关闭精确搜索>\";\n\nString(result).replace(/📜合集介绍：\\n/,'')+String(book.intro).replace(/([\\s\\S]+?)--复制/,'<br>&lrm;<br>--复制').replace(/.*?::/,book.author+'::')\n}else{\n\tString(book.intro)\n\t}",
      "kind": "$.postCollection",
      "lastChapter": "",
      "name": "$.response.collection.name",
      "tocUrl": "$.response.blogsetting.blogId\n@js:\nif(result){\nid='{{$.response.blogsetting.blogId}}';\nlink='{{$.response.blogLink}}';\nurl='http://api.lofter.com/v2.0/blogHomePage.api?product=lofter-android-6.9.2,';\npost={\"method\": \"POST\",\n\"body\": \"targetblogid=\"+id+\"&supportposttypes=1%2C2%2C3%2C4%2C5%2C6&blogdomain=\"+link+\"&offset=0&method=getPostLists&postdigestnew=1&returnData=1&limit=500&checkpwd=1&needgetpoststat=1\"}\nresult=url+JSON.stringify(post);\njava.put('url',result)}else if(baseUrl.match(/postCollection/)){\nresult=java.get('url')\n}"
    },
    "ruleContent": {
      "content": "<js>\nif(/\\.mp4/.test(baseUrl)){\n\tresult = \"请点击章节链接观看视频\\n视频链接：\"+baseUrl\n\t}else{\ncontent = java.getString(\"$..content\");\nimgs = eval(String(java.getString(\"$..photoLinks\")));\nvideo =/video_down_url\\\\\":\\\\\"(.*?)\\\\\"/.test(result)? \"视频链接：\"+String(result).match(/video_down_url\\\\\":\\\\\"(.*?)\\\\\"/)[1]:\"\";\nimg = \"\";\nimgs?imgs.forEach(x=>{\n\tx?img += \"<img src=\\\"\"+x.orign.replace(/%7C.*/g,'')+\"\\\">\\n\":\"\"\n\t}):\"\"\nresult =  content + \"\\n\"+img+\"\\n\"+video;\n}\n</js>",
      "imageDecode": "",
      "imageStyle": "FULL",
      "nextContentUrl": "<js>\nif(!/myReturnGift/.test(baseUrl)){\ntry{\n\t\tid = java.getString(\"$..post.id\");\n\t\tid2 = java.getString(\"$..post.blogId\");\nurl =\"https://api.lofter.com/v1.1/trade/gift/post/newSupportInfo?postId=\"+id+\"&blogId=\"+id2+\"&openFansVipPlan=0&vipFans=0\";\njava.log(JSON.parse(String(java.ajax(url))).code)\n\t$  = JSON.parse(String(java.ajax(url)));\n\tjava.log(JSON.stringify($))\n\tl = $.data.gainReturnGifts.length?$.data.gainReturnGifts:$.data.returnGifts;\n\tls = []\n\tl.forEach(x=>{\n\t\turl = \"https://api.lofter.com/v1.1/trade/gift/myReturnGift?id=\"+x.id+\"&postId=\"+id+\"&blogId=\"+id2;\n\t\tls.push(url)\n\t\t})\n\tresult = ls\n\t}catch(e){\n\t\t}\n\t}\n</js>",
      "replaceRegex": "##src=\"(.*?)\"##src=\"$1,{'headers':{'referer':'{{$..blogPageUrl}}'}}\"",
      "sourceRegex": "",
      "webJs": ""
    },
    "ruleExplore": {
      "author": "$.post.blogInfo.blogNickName",
      "bookList": "<js>result.replace(/null/g,'')</js>\n$.response.items[*]||$.response.posts[*]",
      "bookUrl": "@js:url='{{$.post.blogId||$.post.blogPageUrl}}';\nid='{{$.post.id}}';\nmain=url.match(/_blogid_\\d+/)?url.match(/_blogid_(\\d+)/)[1]:url;\nbody=\"blogdomain=_blogid_\"+main+\".lofter.com&postid=\"+id;\nresult='https://api.lofter.com/oldapi/post/detail.api?product=lofter-android-7.4.4,{\"method\":\"POST\",\"body\":\"'+String(body)+'\"}';",
      "coverUrl": "$.post\n@js:if(result.match(/firstImageUrl=\\[\"\",\"\"\\]/)){\nresult=result.match(/bigAvaImg=(.*?),/)?result.match(/bigAvaImg=(.*?),/)[1]:'';}else{\nresult=result.match(/firstImageUrl=\\[\"([^\"]+)\"/)?result.match(/firstImageUrl=\\[\"([^\"]+)\"/)[1]:\"\"\n}",
      "intro": "{{$.post.digest}}\n<br>&lrm;<br>\n--复制下面的文字，可将用户添加发现或者订阅--\n{{$.post.blogInfo.blogNickName}}::http://api.lofter.com/v2.0/blogHomePage.api?product=lofter-android-7.4.4,{\"method\":\"POST\",\"body\":\"targetblogid={{$.post.blogInfo.blogId}}&supportposttypes=1%2C2%2C3%2C4%2C5%2C6&blogdomain={{$.post.blogInfo.blogName}}.lofter.com&offset={{'\\{\\{(page-1)*18\\}\\}&method=getPostLists&postdigestnew=1&returnData=1&limit=18&checkpwd=1&needgetpoststat=1\"}'}}",
      "kind": "$.post.tag",
      "lastChapter": "$.post.publishTime\n@js:result=java.timeFormat(parseInt(result));\njava.put('time',result)",
      "name": "$.post.title||$.post.noticeLinkTitle||$.post.digest||$.post.blogInfo.blogId||$.post.blogPageUrl##</*\\w.*?>"
    },
    "ruleSearch": {
      "author": "$.blogInfo.blogNickName||$.blogName",
      "bookList": "<js>java.log(baseUrl);result</js>\n$..postData[*]||$.data.posts[*]||$.data.blogs[*]||$.data.collections[*]",
      "bookUrl": "$.postPageUrl\n@js:\nif(!result){\nif(!'{{$.name}}'){\nid='{{$.blogId}}';\nresult='http://api.lofter.com/v2.0/blogHomePage.api?product=lofter-android-7.4.4,{\"method\": \"POST\",\"body\":\"targetblogid='+id+'&method=getBlogInfoDetail&returnData=1&checkpwd=1&needgetpoststat=1\"}'}else{\nblogid='{{$.blogId}}';\nid='{{$.id}}';\nname='{{$.blogName}}';\njava.put('name',name);\nresult='https://api.lofter.com/v1.1/postCollection.api?product=lofter-android-7.4.4,{\"method\": \"POST\",\"body\":\"blogdomain='+name+'.lofter.com&method=getCollectionSimple&offset=0&limit=2000&blogid='+blogid+'&collectionid='+id+'&order=1\"}';java.put('url',result)\n}}else{\nbody=\"blogdomain=_blogid_{{$.blogId}}.lofter.com&postid={{$.id}}\";\nresult='https://api.lofter.com/oldapi/post/detail.api?product=lofter-android-7.4.4,{\"method\":\"POST\",\"body\":\"'+String(body)+'\"}';\n\t\n\t};",
      "coverUrl": "$.firstImageUrl[0]||$.blogInfo.bigAvaImg||$.bigAvaImg||$.coverUrl",
      "intro": "{{$.digest||$.selfIntro||$.posts[0].digest}}\n<br>&lrm;<br>\n--复制下面的文字，可将用户添加发现或者订阅--\n{{$.blogInfo.blogNickName||$.blogNickName||$.blogName}}::http://api.lofter.com/v2.0/blogHomePage.api?product=lofter-android-6.9.2,{\"method\":\"POST\",\"body\":\"supportposttypes=1%2C2%2C3%2C4%2C5%2C6&blogdomain={{$.blogName||$.blogInfo.blogName}}.lofter.com&offset={{'\\{\\{(page-1)*18\\}\\}&method=getPostLists&postdigestnew=1&returnData=1&limit=18&checkpwd=1&needgetpoststat=1\"}'}}",
      "kind": "$.tagList||$.tags",
      "lastChapter": "$.publishTime\n<js>\nif(result){\nresult?result=java.timeFormat(parseInt(result)):'';\njava.put('time',result)}else{\nresult=java.getString('$.posts[0].title||$.posts[0].digest')\n}</js>\n##</*\\w+.*?>",
      "name": "$.title||$.noticeLinkTitle||$.digest||$.blogInfo.blogNiceName||$.blogNickName||$.name##</*\\w.*?>",
      "wordCount": ""
    },
    "ruleToc": {
      "chapterList": "$..posts[*]||$.response.items[*]@put:{blogname:$..blogName}",
      "chapterName": "$.post.title||$.post.digest||$.post.blogInfo.blogNickName\n<js>if(result){\nresult=result\n}else{result=book.name}\nString(result).replace(/<\\/*\\w.*?>/g,'')\n</js>\n##(^.{1,25})##$1###",
      "chapterUrl": "<js>\nif(/postCollection|blogHomePage/.test(baseUrl)){\tbody=\"blogdomain=_blogid_{{$.post.blogId}}.lofter.com&postid={{$.post.id}}\";\nresult='https://api.lofter.com/oldapi/post/detail.api?product=lofter-android-7.4.4,{\"method\":\"POST\",\"body\":\"'+String(body)+'\"}';\n\t}else\tif(/video_down_url\":\"(.*?)\"/.test(result)){\n\t\tresult = String(result).match(/video_down_url\":\"(.*?)\"/)[1];\n\t\t}else{\n\t\t\tresult = baseUrl\n\t\t\t}\n</js>",
      "nextTocUrl": "<js>\npages=java.get('page');\npage=parseInt(pages/500);\nurl=String(java.get('url'));\nlist=[];\n\nif(page>6){\npage=6\n}else{page=page}\n\nfor(i=1;i<=page;i++){\nlist.push(url.replace(/offset=\\d+/,'offset='+(parseInt(i)*500)))\n}\n\nlist\n</js>",
      "updateTime": "$.post.publishTime\n@js:result?java.timeFormat(parseInt(result)):java.get('time')"
    },
    "searchUrl": "@js:\nif(key.indexOf('@')==0){\nresult='https://api.lofter.com/newsearch/blog.json?key='+encodeURI(key.match(/^@(.*)/)[1])+'&offset={\\{(page-1) *10}\\}';\n}else if(key.indexOf('#')==0  || key.indexOf('＃')==0){\nresult='https://api.lofter.com/newsearch/collection.json?key='+encodeURI(key.match(/^(?:#|＃)(.*)/)[1])+'&offset={\\{(page-1) *10}\\}';\nresult\n}else{\n\theader = {\"headers\":{\n\t\"Content-Type\": \"application/x-www-form-urlencoded;charset=utf-8\",\n\t\"deviceid\": java.androidId(),\n \"if-modified-since\": String(new Date()).replace(/(.*?)\\s(.*?)\\s(.*?)\\s(.*?)GMT.*/,'$1, $3 $2 $4 GMT')\n}}\n\n\tresult = \"https://api.lofter.com/newsearch/post.json?key=\"+key+\"&sortType=0&offset={\\{(page-1) *20}\\}&limit=20\"+\",\"+JSON.stringify(header);\n\t}",
    "variableComment": "",
    "weight": 0
  }
]